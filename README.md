# One-line of code for ADA compliance on mobile (and accessible gaming)

This repository demonstrated the possibility to implement all accessibility features to a mobile app (iOS for now), without needing to read/write to the original codebase.

The technologies can be used in more places other than accessibility, as it basically allows code to be modified on the fly.

Note that adding/changing app behaviors is against Apple's App Store policies; but as we are doing this to support accessibility features we should be fine.


# Getting started:
- For Unity: In a Unity project, include Plugins/TMinusUnitySDK in Unity Package Manager.
`serverservercode` is a Python Flask project that you should host; with this server, you could push code directly to customer's devices that could add accessibility features on the fly.
- The above SDK can download the following code that you could put on a server to make the game accessible: `serverservercode/JSProjects/shared.js` and all scripts in `serverservercode/JSProjects/com.GruzWorks.DeskSwipe`.


# How does this work
1. There are two important scripts: `Plugins/TMinusUnitySDK/Runtime/iOS/TMinusiOSSDK.m` and `Plugins/TMinusUnitySDK/Runtime/iOS/TMinusUnitySDK.m` (only needed for apps created with Unity)
2. `Plugins/TMinusUnitySDK/Runtime/iOS/TMinusiOSSDK.m` maps the entire iOS native APIs (UIKit & SwiftUI) to JavaScript, then we use Objective-C's runtime magics to manipulate runtime properties.
    - `TMinusiOSSDK.m` is partially generated by a Python script `Scripts/javascript_gen.py`. Specifically, we aren't manually recreating the 10k+ mappings from Objective-C native APIs to JavaScript. Rather, we use dlsym with names for functions calls; for objective call like `[myObj doSomthing]`, we would use `objc_msgSend(obj, NSSelectorFromString(@"doSomthing"))`. For example, to call the native code `UIAccessibilityPostNotification(UIAccessibilityScreenChangedNotification)`, we do this in javascript `InvokeFunc_Void_Int0_Id1("UIAccessibilityPostNotification", LookupSymbol_Int("UIAccessibilityScreenChangedNotification"));`
    - Just write an email to jklelxy@gmail.com for more questions...
3. `Plugins/TMinusUnitySDK/Runtime/iOS/TMinusUnitySDK.m` and `Plugins/TMinusUnitySDK/Runtime/TMinusAI.cs` native script that talks to Unity C# API, and map that to Javascript. This allows us to write Unity with Javascript.

# Example used:
https://github.com/outfrost/deckswipe
https://github.com/zigurous/unity-wordle-tutorial
